<!DOCTYPE html>
<html>
<head>
    <title>Your URLs</title>
</head>
<body>
    

<h2>Your Shortened URLs</h2>
{% if messages %}
    {% for message in messages %}
        <p style="color:red;">{{ message }}</p>
    {% endfor %}
{% endif %}

<!-- Search -->
<form method="GET">
    <input type="text" name="q" placeholder="Search title or url">
    <button type="submit">Search</button>
</form>

<br>

<a href="{% url 'add_url' %}">Add New URL</a> |
<a href="{% url 'logout' %}">Logout</a>

<hr>

<table border="1" cellpadding="8">
    <tr>
        <th>Title</th>
        <th>Original URL</th>
        <th>Short URL</th>
        <th>Created</th>
        <th>Actions</th>
    </tr>

    {% for url in page_obj %}
    <tr>
        <td>{{ url.title }}</td>
        <td>{{ url.original_url }}</td>
        <td>
            <a href="/{{ url.short_code }}/" target="_blank">
                {{ url.short_code }}
            </a>
        </td>
        <td>{{ url.created_at }}</td>
        <td>
            <a href="{% url 'edit_url' url.id %}">Edit</a> |
            <a href="{% url 'delete_url' url.id %}" onclick="return confirm('Are you sure you want to delete this URL');" >Delete</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="5">No URLs found</td>
    </tr>
    {% endfor %}
</table>

<br>

<!-- Pagination -->
<div>
    {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
    {% endif %}

    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Next</a>
    {% endif %}
</div>

</body>
</html>
